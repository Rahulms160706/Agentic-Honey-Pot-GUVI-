# ðŸš€ Google Gemini API Setup Guide

## Step 1: Get Your Free API Key

### Option A: Quick Setup (Recommended)
1. Go to: https://makersuite.google.com/app/apikey
2. Click **"Create API Key"**
3. Copy the key (starts with `AIza...`)
4. Keep it safe!

### Option B: Through Google AI Studio
1. Visit: https://ai.google.dev
2. Click **"Get API Key"**
3. Create new API key in Google Cloud Console
4. Copy the key

---

## Step 2: Install Required Packages

### Windows PowerShell:
```powershell
pip install -r requirements.txt
```

This will install:
- âœ… `google-generativeai` - Gemini API client
- âœ… `python-dotenv` - For .env file support
- âœ… All other dependencies

---

## Step 3: Set the API Key

### Option A: Using Environment Variable (RECOMMENDED)

#### Windows PowerShell:
```powershell
$env:GOOGLE_API_KEY = "YOUR_API_KEY_HERE"
python main.py
```

#### Windows Command Prompt:
```cmd
set GOOGLE_API_KEY=YOUR_API_KEY_HERE
python main.py
```

#### Windows (Permanent - Set in System):
```powershell
[Environment]::SetEnvironmentVariable("GOOGLE_API_KEY", "YOUR_API_KEY_HERE", "User")
```
Then restart your terminal and run: `python main.py`

#### Linux/Mac:
```bash
export GOOGLE_API_KEY="YOUR_API_KEY_HERE"
python main.py
```

---

### Option B: Using .env File (EASIEST)

1. Create a file named `.env` in the project folder:
```
c:\Users\rahul\OneDrive\Desktop\2nd Year\GUVI\.env
```

2. Add this content:
```
GOOGLE_API_KEY=YOUR_API_KEY_HERE
```

3. Replace `YOUR_API_KEY_HERE` with your actual API key

4. Now just run:
```powershell
python main.py
```

The system will automatically read from `.env`!

---

## Step 4: Verify Setup

Run this command to verify everything works:

```powershell
python -c "import google.generativeai as genai; print('âœ… Google Generative AI installed successfully!')"
```

---

## Step 5: Run Your Project

### Terminal 1: Start the server
```powershell
python main.py
```

**You should see:**
```
âœ… Gemini API initialized successfully
INFO:     Started server process
INFO:     Uvicorn running on http://0.0.0.0:8000
```

### Terminal 2: Run tests
```powershell
python test_scenarios.py
```

**You should see:**
```
âœ… Server is running: healthy
Generated response using Gemini API
ðŸ¤– Agent Response:
   [Dynamic response generated by Gemini!]
```

### Browser: View Dashboard
```
http://localhost:8000/dashboard
```

---

## âœ… Verification Checklist

- [ ] API key obtained from Google AI
- [ ] `.env` file created with API key
- [ ] `pip install -r requirements.txt` completed
- [ ] Server logs show "âœ… Gemini API initialized successfully"
- [ ] Test responses show "Generated response using Gemini API"
- [ ] Dashboard loads at http://localhost:8000/dashboard
- [ ] Responses are varied (not repeating)

---

## ðŸ†˜ Troubleshooting

### Error: "GOOGLE_API_KEY not set"
**Solution:** Make sure you have set the environment variable or created .env file with the API key.

```powershell
# Check if variable is set
$env:GOOGLE_API_KEY
```

### Error: "Invalid API key"
**Solution:** 
1. Double-check your API key from https://makersuite.google.com/app/apikey
2. Make sure there are no extra spaces
3. Remove it from code and only use environment variable

### Error: "ImportError: No module named 'google'"
**Solution:**
```powershell
pip install google-generativeai
```

### Error: "Gemini API failed, falling back to templates"
**This is OK!** The system will:
- âœ… Still work normally
- âœ… Use template-based responses as fallback
- âœ… Check logs for specific error

Check the error message in server logs to debug further.

### Responses still look like templates?
**Solution:**
1. Make sure server logged: "âœ… Gemini API initialized successfully"
2. Make sure server logs show: "Generated response using Gemini API"
3. Check internet connection (Gemini needs internet)
4. Try restarting server with valid API key

---

## ðŸ“Š Expected Behavior

### With Gemini API Enabled:
```
Scammer: "Send money to my UPI: attacker@paytm"
Agent:   "ok but first can u tell me ur full name and wat bank"
         (next time)
Agent:   "which UPI did u say? paytm? also send ur phone number"
         (next time)
Agent:   "wait lemme verify... give me all details one by one pls"
```

Each response is **unique and context-aware**!

### Without Gemini (Fallback):
Responses will be from the template list but still natural-sounding.

---

## ðŸŽ¯ You're All Set!

Your system is now using:
- âœ… Google Gemini API for dynamic responses
- âœ… Template fallback if API is unavailable
- âœ… Real-time intelligence extraction
- âœ… Beautiful dashboard to view results

Run `python test_scenarios.py` and watch the magic happen! ðŸš€

---

## Quick Command Reference

```powershell
# Set API key (temporary - PowerShell)
$env:GOOGLE_API_KEY = "YOUR_KEY"

# Set API key (permanent - PowerShell)
[Environment]::SetEnvironmentVariable("GOOGLE_API_KEY", "YOUR_KEY", "User")

# Install packages
pip install -r requirements.txt

# Start server
python main.py

# Run tests
python test_scenarios.py

# View dashboard
# http://localhost:8000/dashboard
```

---

## Need Help?

1. Check server logs for error messages
2. Verify API key is valid at https://makersuite.google.com/app/apikey
3. Ensure internet connection (Gemini API requires it)
4. Check that GOOGLE_API_KEY is set: `echo $env:GOOGLE_API_KEY` (PowerShell)

Good luck! ðŸŽ‰
